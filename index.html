<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>黄溜溜@PHP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="PHP">
<meta name="keywords" content="PHP">
<meta property="og:type" content="website">
<meta property="og:title" content="黄溜溜@PHP">
<meta property="og:url" content="https://github.com/tangchunxin/tangchunxin.github.io/index.html">
<meta property="og:site_name" content="黄溜溜@PHP">
<meta property="og:description" content="PHP">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="黄溜溜@PHP">
<meta name="twitter:description" content="PHP">
  
    <link rel="alternate" href="/atom.xml" title="黄溜溜@PHP" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">黄溜溜@PHP</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一个小小的PHP</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/tangchunxin/tangchunxin.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-sql关闭-query-cache" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/17/sql关闭-query-cache/" class="article-date">
  <time datetime="2018-08-17T09:12:59.000Z" itemprop="datePublished">2018-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/17/sql关闭-query-cache/">sql关闭 query_cache</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MySQL-query-cache-type-详解"><a href="#MySQL-query-cache-type-详解" class="headerlink" title="MySQL query_cache_type 详解"></a>MySQL query_cache_type 详解</h2><ul>
<li>set global query_cache_size=0;</li>
<li>set global query_cache_type=0;</li>
</ul>
<hr>
<h4 id="MySQL设置查询缓存的用意："><a href="#MySQL设置查询缓存的用意：" class="headerlink" title="MySQL设置查询缓存的用意："></a>MySQL设置查询缓存的用意：</h4><p>　　把查询到的结果缓存起来，下次再执行相同查询时就可以直接从结果集中取；这样就比重新查一遍要快的多。</p>
<p>查询缓存的最终结果是事与愿违：</p>
<p>　　之所以查询缓存并没有能起到提升性能的做用，客观上有如下两点原因</p>
<p>　　1、把SQL语句的hash值作为键，SQL语句的结果集作为值；这样就引起了一个问题如 select user from mysql.user 和 SELECT user FROM mysql.user </p>
<p>　　这两个将会被当成不同的SQL语句，这个时候就算结果集已经有了，但是一然用不到。</p>
<p>　　2、当查询所基于的低层表有改动时与这个表有关的查询缓存都会作废、如果对于并发度比较大的系统这个开销是可观的；对于作废结果集这个操作也是要用并发</p>
<p>　　访问控制的，就是说也会有锁。并发大的时候就会有Waiting for query cache lock 产生。</p>
<p>　　3、至于用不用还是要看业务模型的。</p>
<p>如果何配置查询缓存：</p>
<p>　　query_cache_type 这个系统变量控制着查询缓存工能的开启的关闭。</p>
<p>　　query_cache_type=0时表示关闭，1时表示打开，2表示只要select 中明确指定SQL_CACHE才缓存。</p>
<p>　　这个参数的设置有点奇怪，1、如果事先查询缓存是关闭的然而用 set @@global.query_cache_type=1; 会报错</p>
<p>　　ERROR 1651 (HY000): Query cache is disabled; restart the server with query_cache_type=1 to enable it</p>
<p>　　2、如果事先是打开着的尝试去闭关它，那么这个关闭也是不完全的，这种情况下查询还是会去尝试查找缓存。</p>
<p>　　最好的关闭查询缓存的办法就是把my.cnf 中的query_cache_type=0然后再重启mysql。</p>
<p>查询缓存相关的系统变量：</p>
<p>　　have_query_cache　　表示这个mysql版本是否支持查询缓存。</p>
<p>　　query_cache_limit　　 表示单个结果集所被允许缓存的最大值。</p>
<p>　　query_cache_min_res_unit　　每个被缓存的结果集要占用的最小内存。</p>
<p>　　query_cache_size　　用于查询缓存的内存大小。</p>
<p>如何监控查询缓存的命中率： </p>
<p>　　Qcache_free_memory　　查询缓存目前剩余空间大小。</p>
<p>　　Qcache_hits　　　　　     查询缓存的命中次数。</p>
<p>　　Qcache_inserts　　　　　 查询缓存插入的次数。</p>
<p>　　也就是说缓存的命中率为 Qcache_hits/(Qcache_hits+Qcache_inserts)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/08/17/sql关闭-query-cache/" data-id="cjkxs55m6000posd6bin8g2sx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-fiddle-https配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/17/fiddle-https配置/" class="article-date">
  <time datetime="2018-08-17T09:11:36.000Z" itemprop="datePublished">2018-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/17/fiddle-https配置/">fiddle https配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="原blog地址"><a href="#原blog地址" class="headerlink" title="原blog地址"></a>原blog地址</h2><ul>
<li><a href="https://blog.csdn.net/laofashi2015/article/details/78476499" target="_blank" rel="noopener">https://blog.csdn.net/laofashi2015/article/details/78476499</a></li>
</ul>
<h2 id="安装之后-app还是抓取不了https包-具体问题是因为"><a href="#安装之后-app还是抓取不了https包-具体问题是因为" class="headerlink" title="安装之后 app还是抓取不了https包  具体问题是因为"></a>安装之后 app还是抓取不了https包  具体问题是因为</h2><ul>
<li><p>IOS 10.3升级之后，安装的证书默认是不启用的，需要手动去开启。</p>
</li>
<li><p>设置 –&gt; 通用 –&gt; 关于本机 –&gt; 证书信息设置; 将Fiddler的证书开关打开就行了</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/08/17/fiddle-https配置/" data-id="cjkxs55le0009osd6h4jwn9ro" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/17/git常用命令/" class="article-date">
  <time datetime="2018-08-17T06:08:16.000Z" itemprop="datePublished">2018-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/17/git常用命令/">git常用命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="git-常用命令"><a href="#git-常用命令" class="headerlink" title="git 常用命令"></a>git 常用命令</h2><ul>
<li>git config –global user.name “tangchunxin”</li>
<li>git config –global user.email “<a href="mailto:tangchunxin@p2peye.com" target="_blank" rel="noopener">tangchunxin@p2peye.com</a>“</li>
<li>git config –global credential.helper store</li>
</ul>
<h4 id="git强制覆盖："><a href="#git强制覆盖：" class="headerlink" title="git强制覆盖："></a>git强制覆盖：</h4><ul>
<li>git fetch –all</li>
<li>git reset –hard origin/master</li>
<li>git pull</li>
</ul>
<ul>
<li>git stash  //将本地修改临时暂存起来</li>
<li>git stash pop //从暂存区还原</li>
<li>git stash list  //暂存区列表</li>
<li><p>git stash pop stash@{0} //从暂存区还原</p>
</li>
<li><p>git status</p>
</li>
<li>git add a.php   //提交到本地暂存区</li>
<li>git commit -m “提交a.php”  //提交到本地仓库</li>
<li>git push origin   //推送到远程</li>
<li>git branch -a  //查看远程分支状态</li>
<li>git branch dev  //创建分支</li>
<li>git checkout dev  //切分支</li>
<li>git checkout -b  dev  //创建并切分支</li>
<li></li>
<li>git push origin dev  将本地新建的分支 推到远程</li>
<li>git merge dev  把dev的代码 合并到当前分支</li>
<li>git log –oneline</li>
<li>git diff  //工作区 和暂存区</li>
<li>git diff –cached  //暂存区和历史版本</li>
<li>git diff master   //工作去和历史版本</li>
<li></li>
<li>git diff  946de  go.txt</li>
<li></li>
</ul>
<ul>
<li>git checkout – go.txt  撤销本地的修改</li>
<li>git reset HEAD a.php   从暂存区撤回到 本地</li>
</ul>
<p>假设远端库名是 origin，你要比较的本地分支为 test，远端分支就是 xxx</p>
<p>本地分支的话，直接git diff branchA branchB，而远程分支的话，git diff branchA remoteB/branchB，区别就是远程分支前面要加上remote名称。</p>
<ul>
<li>git reset –hard HEAD^  从本地库回退版本,本地修改都会被撤销</li>
<li>git reset –mixed HEAD^  从本地仓库撤回代码 ,本地修改保存</li>
<li>git reset –soft HEAD^  从本地仓库撤回代码,本地修改保存,暂存区也保存</li>
</ul>
<h4 id="问题1-在dev3分支-pull-master分支代码后-貌似dev3分支-失去了当前分支的追踪信息-因为重新找到追踪信息-git-branch-–set-upstream-to-origin-dev3"><a href="#问题1-在dev3分支-pull-master分支代码后-貌似dev3分支-失去了当前分支的追踪信息-因为重新找到追踪信息-git-branch-–set-upstream-to-origin-dev3" class="headerlink" title="问题1.在dev3分支  pull master分支代码后,貌似dev3分支,失去了当前分支的追踪信息,因为重新找到追踪信息 git branch –set-upstream-to origin dev3"></a>问题1.在dev3分支  pull master分支代码后,貌似dev3分支,失去了当前分支的追踪信息,因为重新找到追踪信息 git branch –set-upstream-to origin dev3</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">There is no tracking information for the current branch.</span><br><span class="line">Please specify which branch you want to merge with.</span><br><span class="line">See git-pull(1) for details.</span><br><span class="line"></span><br><span class="line">    git pull &lt;remote&gt; &lt;branch&gt;</span><br><span class="line"></span><br><span class="line">If you wish to set tracking information for this branch you can do so with:</span><br><span class="line"></span><br><span class="line">    git branch --set-upstream-to=origin/&lt;branch&gt; dev3</span><br></pre></td></tr></table></figure>
<ul>
<li>git push -u  加了参数-u后，以后即可直接用git push 代替git push origin master</li>
<li>git push –set-upstream origin dev3</li>
</ul>
<ul>
<li>git push origin dev3 –force</li>
<li></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Unable to create &apos;.git/index.lock&apos;: File exists</span><br><span class="line">2014年03月03日 14:10:27</span><br><span class="line">阅读数：5159</span><br><span class="line">Git – fatal: Unable to create ‘/.git/index.lock’: File exists.</span><br><span class="line">fatal: Unable to create ‘/path/my_proj/.git/index.lock’: File exists.</span><br><span class="line">If no other git process is currently running, this probably means a</span><br><span class="line">git process crashed in this repository earlier. Make sure no other git</span><br><span class="line">process is running and remove the file manually to continue.</span><br><span class="line">可以试着删除 index.lock</span><br><span class="line">rm -f ./.git/index.lock</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/08/17/git常用命令/" data-id="cjkxs55lk000cosd6xcpoegcw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-es搜索-must-should联合查询" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/17/es搜索-must-should联合查询/" class="article-date">
  <time datetime="2018-08-17T04:53:44.000Z" itemprop="datePublished">2018-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/17/es搜索-must-should联合查询/">es搜索 must should联合查询</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.cnblogs.com/pilihaotian/p/5830754.html" target="_blank" rel="noopener">https://www.cnblogs.com/pilihaotian/p/5830754.html</a></p>
<ul>
<li>我要查询的组合条件是b=82 || （b=0 &amp;&amp; a = 0） || （b=0 &amp;&amp; a=100） ，es5.0这个must和should的Java代码怎么写？</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;query&quot;: &#123;</span><br><span class="line">   &quot;bool&quot;: &#123;</span><br><span class="line">     &quot;should&quot;: [</span><br><span class="line">       &#123;&quot;bool&quot;: &#123;</span><br><span class="line">         &quot;must&quot;: [</span><br><span class="line">           &#123;&#125;</span><br><span class="line">         ]</span><br><span class="line">       &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">       &#123;&quot;bool&quot;: &#123;</span><br><span class="line">         &quot;must&quot;: [</span><br><span class="line">           &#123;&#125;</span><br><span class="line">         ]</span><br><span class="line">       &#125;&#125;</span><br><span class="line">     ]</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>must和should查询的组合条件是is_black=2 &amp;&amp; （black_type= 10 ||  black_type = 9 || operating_state == 8)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">2018-08-15 18:20:59::[INFO]    array (</span><br><span class="line">  &apos;index&apos; =&gt; &apos;platform&apos;,</span><br><span class="line">  &apos;type&apos; =&gt; &apos;info&apos;,</span><br><span class="line">  &apos;sort&apos; =&gt; </span><br><span class="line">  array (</span><br><span class="line">    0 =&gt; &apos;black_time:desc&apos;,</span><br><span class="line">  ),</span><br><span class="line">  &apos;size&apos; =&gt; 30,</span><br><span class="line">  &apos;from&apos; =&gt; 0,</span><br><span class="line">  &apos;body&apos; =&gt; </span><br><span class="line">  array (</span><br><span class="line">    &apos;query&apos; =&gt; </span><br><span class="line">    array (</span><br><span class="line">      &apos;bool&apos; =&gt; </span><br><span class="line">      array (</span><br><span class="line">        &apos;must&apos; =&gt; </span><br><span class="line">        array (</span><br><span class="line">          0 =&gt; </span><br><span class="line">          array (</span><br><span class="line">            &apos;bool&apos; =&gt; </span><br><span class="line">            array (</span><br><span class="line">              &apos;should&apos; =&gt; </span><br><span class="line">              array (</span><br><span class="line">                0 =&gt; </span><br><span class="line">                array (</span><br><span class="line">                  &apos;match&apos; =&gt; </span><br><span class="line">                  array (</span><br><span class="line">                    &apos;black_type&apos; =&gt; 10,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                1 =&gt; </span><br><span class="line">                array (</span><br><span class="line">                  &apos;match&apos; =&gt; </span><br><span class="line">                  array (</span><br><span class="line">                    &apos;black_type&apos; =&gt; 9,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                2 =&gt; </span><br><span class="line">                array (</span><br><span class="line">                  &apos;match&apos; =&gt; </span><br><span class="line">                  array (</span><br><span class="line">                    &apos;operating_state&apos; =&gt; 8,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          1 =&gt; </span><br><span class="line">          array (</span><br><span class="line">            0 =&gt; </span><br><span class="line">            array (</span><br><span class="line">              &apos;term&apos; =&gt; </span><br><span class="line">              array (</span><br><span class="line">                &apos;is_black&apos; =&gt; 2,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)::</span><br><span class="line">2018-08-15 18:20:59::[INFO]    array (</span><br><span class="line">  &apos;index&apos; =&gt; &apos;platform&apos;,</span><br><span class="line">  &apos;type&apos; =&gt; &apos;info&apos;,</span><br><span class="line">  &apos;sort&apos; =&gt; </span><br><span class="line">  array (</span><br><span class="line">    0 =&gt; &apos;black_time:desc&apos;,</span><br><span class="line">  ),</span><br><span class="line">  &apos;size&apos; =&gt; 30,</span><br><span class="line">  &apos;from&apos; =&gt; 0,</span><br><span class="line">  &apos;body&apos; =&gt; </span><br><span class="line">  array (</span><br><span class="line">    &apos;query&apos; =&gt; </span><br><span class="line">    array (</span><br><span class="line">      &apos;bool&apos; =&gt; </span><br><span class="line">      array (</span><br><span class="line">        &apos;must&apos; =&gt; </span><br><span class="line">        array (</span><br><span class="line">          0 =&gt; </span><br><span class="line">          array (</span><br><span class="line">            &apos;term&apos; =&gt; </span><br><span class="line">            array (</span><br><span class="line">              &apos;is_black&apos; =&gt; 1,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        &apos;must_not&apos; =&gt; </span><br><span class="line">        array (</span><br><span class="line">          0 =&gt; </span><br><span class="line">          array (</span><br><span class="line">            0 =&gt; </span><br><span class="line">            array (</span><br><span class="line">              &apos;term&apos; =&gt; </span><br><span class="line">              array (</span><br><span class="line">                &apos;operating_state_combination&apos; =&gt; 1,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">)::</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/08/17/es搜索-must-should联合查询/" data-id="cjkxs55ld0008osd63mlh6gws" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/17/hello-world/" class="article-date">
  <time datetime="2018-08-17T01:56:53.626Z" itemprop="datePublished">2018-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/17/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/08/17/hello-world/" data-id="cjkxs55ll000dosd60cpg4yvr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git-start" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/16/git-start/" class="article-date">
  <time datetime="2018-08-16T15:31:23.000Z" itemprop="datePublished">2018-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/16/git-start/">git start</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/08/16/git-start/" data-id="cjkxs55li000bosd6l2kqzhmr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-正则-手机号中间4位变成" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/20/正则-手机号中间4位变成/" class="article-date">
  <time datetime="2018-05-20T07:59:56.000Z" itemprop="datePublished">2018-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/20/正则-手机号中间4位变成/">正则 手机号中间4位变成*</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>例子<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$tel=&apos;16601162743&apos;;</span><br><span class="line"></span><br><span class="line">$tel = preg_replace(&apos;/(\d&#123;3&#125;)\d&#123;4&#125;(\d&#123;4&#125;)/&apos;, &apos;$1****$2&apos;, $tel);</span><br><span class="line">var_dump($tel);</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/05/20/正则-手机号中间4位变成/" data-id="cjkxs55m9000rosd6conf5mw0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-PHP-curl-远程抓取图片" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/20/PHP-curl-远程抓取图片/" class="article-date">
  <time datetime="2018-05-20T07:54:23.000Z" itemprop="datePublished">2018-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/20/PHP-curl-远程抓取图片/">PHP_curl 远程抓取图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="远程图片抓取。"><a href="#远程图片抓取。" class="headerlink" title="远程图片抓取。"></a>远程图片抓取。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">function GrabImage($url,$filename=&quot;&quot;) &#123;</span><br><span class="line">    if($url==&quot;&quot;):return false;endif;</span><br><span class="line"></span><br><span class="line">    if($filename==&quot;&quot;) &#123;</span><br><span class="line">        $ext=strrchr($url,&quot;.&quot;);</span><br><span class="line">        if($ext!=&quot;.gif&quot; &amp;&amp; $ext!=&quot;.jpg&quot;):return false;endif;</span><br><span class="line">        $filename=date(&quot;dMYHis&quot;).$ext;</span><br><span class="line">    &#125;</span><br><span class="line">/*</span><br><span class="line">    $img = file_get_contents($url);</span><br><span class="line">    if(!$img)&#123;</span><br><span class="line">    	return false;</span><br><span class="line">    &#125;</span><br><span class="line">    file_put_contents($filename,$img);</span><br><span class="line">*/</span><br><span class="line">    $ch=curl_init();</span><br><span class="line">    $timeout=5;</span><br><span class="line">    curl_setopt($ch,CURLOPT_URL,$url);</span><br><span class="line">    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);</span><br><span class="line">    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);</span><br><span class="line">    $img=curl_exec($ch);</span><br><span class="line">    curl_close($ch);</span><br><span class="line"></span><br><span class="line">//    ob_start();</span><br><span class="line">//    $file = readfile($url);</span><br><span class="line">//    $img = ob_get_contents();</span><br><span class="line">//    ob_end_clean();</span><br><span class="line">//    $size = strlen($img);</span><br><span class="line">    if(!$img) return false;</span><br><span class="line"></span><br><span class="line">    $fp2=@fopen($filename, &quot;a&quot;);</span><br><span class="line">    fwrite($fp2,$img);</span><br><span class="line">    fclose($fp2);</span><br><span class="line"></span><br><span class="line">    return $filename;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果没有配https<br>D:\work\sites\img_p2peye\upload.php 70行中https变成http<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">echo json_encode ( array (</span><br><span class="line">		&quot;code&quot; =&gt; 200,</span><br><span class="line">		&quot;url&quot; =&gt; &quot;https://img.p2peye.com&#123;$path&#125;/$res&quot;,</span><br><span class="line">		&quot;file&quot; =&gt; $path . &quot;/&quot; .$res,</span><br><span class="line">		&quot;name&quot; =&gt; $res,</span><br><span class="line">		&quot;file_name&quot; =&gt; $path . &apos;/&apos;</span><br><span class="line">) );</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>变成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">echo json_encode ( array (</span><br><span class="line">		&quot;code&quot; =&gt; 200,</span><br><span class="line">		&quot;url&quot; =&gt; &quot;http://img.p2peye.com&#123;$path&#125;/$res&quot;,</span><br><span class="line">		&quot;file&quot; =&gt; $path . &quot;/&quot; .$res,</span><br><span class="line">		&quot;name&quot; =&gt; $res,</span><br><span class="line">		&quot;file_name&quot; =&gt; $path . &apos;/&apos;</span><br><span class="line">) );</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/05/20/PHP-curl-远程抓取图片/" data-id="cjkxs55l50003osd6fmlwym81" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="w-php-导出-excel-简单方式" class="article article-type-w" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/09/php-导出-excel-简单方式/" class="article-date">
  <time datetime="2018-05-09T14:02:08.000Z" itemprop="datePublished">2018-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/09/php-导出-excel-简单方式/">php 导出 excel 简单方式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="php-导出-excel-简单方式"><a href="#php-导出-excel-简单方式" class="headerlink" title="php 导出 excel  简单方式"></a>php 导出 excel  简单方式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$pname = &quot;ces&quot;;</span><br><span class="line">$url = &quot;aaa&quot;;</span><br><span class="line">$icp = &quot;icl&quot;;</span><br><span class="line">$str = &quot;平台ID\t平台名称\t首页网址\t\n&quot;;</span><br><span class="line">$str = iconv(&apos;utf-8&apos;,&apos;gbk&apos;,$str);</span><br><span class="line">$str .= trim($pname).&quot;\t&quot;.trim($url).&quot;\t&quot;.trim($icp).&quot;\t\n&quot;;</span><br><span class="line"></span><br><span class="line"> $filename = &apos;平台档案导出&apos;.date(&apos;Ymd&apos;).&apos;.xls&apos;;</span><br><span class="line"></span><br><span class="line"> header(&quot;Cache-Control: must-revalidate, post-check=0, pre-check=0&quot;);</span><br><span class="line"> header(&quot;Content-Type: application/vnd.ms-execl&quot;);</span><br><span class="line"> header(&quot;Content-Type: application/force-download&quot;);</span><br><span class="line"> header(&quot;Content-Type: application/download&quot;);</span><br><span class="line"> header(&quot;Content-Disposition: attachment; filename=&quot;.$filename);</span><br><span class="line"> header(&quot;Content-Transfer-Encoding: binary&quot;);</span><br><span class="line"> header(&quot;Pragma: no-cache&quot;);</span><br><span class="line"> header(&quot;Expires: 0&quot;);</span><br><span class="line"></span><br><span class="line"> echo $str;</span><br></pre></td></tr></table></figure>
<p> header部分可修改为<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> header(&apos;Content-Description: File Transfer&apos;);</span><br><span class="line">header(&apos;Content-Type: application/vnd.ms-excel&apos;);</span><br><span class="line">header(&apos;Content-Disposition: attachment; filename=&quot;&apos;. $filename .&apos;&quot;&apos;);</span><br><span class="line">header(&apos;Expires: 0&apos;);</span><br><span class="line">header(&apos;Cache-Control: must-revalidate&apos;);</span><br><span class="line">header(&apos;Pragma: public&apos;);</span><br><span class="line">$fp = fopen(&apos;php://output&apos;, &apos;a&apos;);//打开output流</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//mb_convert_variables(&apos;GBK&apos;, &apos;UTF-8&apos;, $str);</span><br><span class="line">fputs($fp, $str);//将数据格式化为CSV格式并写入到output流中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">unset($str);//释放变量的内存</span><br><span class="line">ob_flush();</span><br><span class="line">flush();//必须同时使用 ob_flush() 和flush() 函数来刷新输出缓冲。</span><br><span class="line">fclose($fp);</span><br><span class="line"></span><br><span class="line">exit;</span><br></pre></td></tr></table></figure></p>
<h4 id="php-导出-txt-简单方式"><a href="#php-导出-txt-简单方式" class="headerlink" title="php 导出 txt  简单方式`"></a>php 导出 txt  简单方式`</h4> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//下载文件名</span><br><span class="line"> $file_name = $name.date(&apos;Y.m.d.H-i-s&apos;,time());</span><br><span class="line"> $filename = iconv(&apos;UTF-8&apos;, &apos;GBK&apos;, $file_name);</span><br><span class="line"> header(&apos;Content-Type: text/plain&apos;);</span><br><span class="line"> header ( &apos;Content-Disposition: attachment;filename=&quot;&apos; . $filename . &apos;.txt&quot;&apos; ); </span><br><span class="line"> header ( &apos;Cache-Control: max-age=0&apos; );</span><br><span class="line"> echo &quot;我是.txt的内容&quot;;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/05/09/php-导出-excel-简单方式/" data-id="cjkxs55m4000oosd6ftwcvb2r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hostory-go-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/09/hostory-go-1/" class="article-date">
  <time datetime="2018-05-09T14:00:20.000Z" itemprop="datePublished">2018-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/09/hostory-go-1/">hostory.go(-1)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="hostory-go-1"><a href="#hostory-go-1" class="headerlink" title="hostory.go(-1)"></a>hostory.go(-1)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (! $platform[&apos;pprovince&apos;]) &#123;</span><br><span class="line">      echo &quot;&lt;script&gt;alert(&apos;省份名称不能为空&apos;);history.go(-1);&lt;/script&gt;&quot;;</span><br><span class="line">      exit();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="两个方法的区别"><a href="#两个方法的区别" class="headerlink" title="两个方法的区别"></a>两个方法的区别</h4><p>既然history.back(-1)和history.go(-1)都是返回之前页面，但是方法不同，所以肯定是有区别的：</p>
<ul>
<li>history.back(-1)//直接返回当前页的上一页，数据全部消息，是个新页面</li>
<li><p>history.go(-1)//也是返回当前页的上一页，不过表单里的数据全部还在</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>返回、前进页面的方法下面总结一下：</p>
</li>
<li><p>window.location.reload() //刷新</p>
</li>
<li>window.history.go(1) //前进</li>
<li>window.history.go(-1) //后退</li>
<li>window.history.forward() //前进</li>
<li>window.history.back() 后退+刷新</li>
<li></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/05/09/hostory-go-1/" data-id="cjkxs55lt000iosd6hdgirsrx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-PHP中跳转js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/09/PHP中跳转js/" class="article-date">
  <time datetime="2018-05-09T13:59:10.000Z" itemprop="datePublished">2018-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/09/PHP中跳转js/">PHP中跳转js</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="PHP中跳转-js"><a href="#PHP中跳转-js" class="headerlink" title="PHP中跳转  js"></a>PHP中跳转  js</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;&lt;script language=&quot;javascript&quot;&gt;</span><br><span class="line">alert(&quot;添加完成，同步成功&quot;);</span><br><span class="line">window.location.href=&quot;http://ymis.p2peye.com/platform/index&quot;;</span><br><span class="line"> &lt;/script&gt;&apos;;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/05/09/PHP中跳转js/" data-id="cjkxs55l30002osd6buy7tj72" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-正则获取主域名" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/09/正则获取主域名/" class="article-date">
  <time datetime="2018-05-09T13:56:27.000Z" itemprop="datePublished">2018-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/09/正则获取主域名/">正则获取主域名</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="域名匹配"><a href="#域名匹配" class="headerlink" title="域名匹配"></a>域名匹配</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">preg_match(&apos;/[\w][\w-]*\.(?:com\.cn|net\.cn|gov\.cn|ac\.cn|com|cn|co|net|org|gov|info|xyz|name|mobi|wang|top|xin|shop|ltd|cc|club|vip|ink|fun|online|tech|store|red|pro|group|work|ren|biz|site|tv|wiki|design|live|pub)(\/|$)/isU&apos;</span><br><span class="line">, &quot;www.baidu.info/index.php&quot;, $domain);</span><br><span class="line"></span><br><span class="line">$domain = !empty($domain[0]) ? $domain[0] : &apos;&apos;;</span><br><span class="line"></span><br><span class="line">$aa= str_replace(strstr($domain, &apos;.&apos;), &apos;&apos;, $domain);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var_dump($aa);</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/tangchunxin/tangchunxin.github.io/2018/05/09/正则获取主域名/" data-id="cjkxs55mo000sosd6e0k6c7ef" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/08/17/sql关闭-query-cache/">sql关闭 query_cache</a>
          </li>
        
          <li>
            <a href="/2018/08/17/fiddle-https配置/">fiddle https配置</a>
          </li>
        
          <li>
            <a href="/2018/08/17/git常用命令/">git常用命令</a>
          </li>
        
          <li>
            <a href="/2018/08/17/es搜索-must-should联合查询/">es搜索 must should联合查询</a>
          </li>
        
          <li>
            <a href="/2018/08/17/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Tangchunxin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>